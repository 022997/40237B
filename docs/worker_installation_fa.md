 # مراحل نصب از طریق Cloudflare Worker

خب اول کد Worker رو از [اینجا](https://github.com/bia-pain-bache/BPB-Worker-Panel/releases/download/v2.2/worker.js) دانلود کنید و ببرید توی داشبورد ورکر کلادفلرو فایل رو آپلود کنید (چون کد خیلی زیاد شده Copy Paste کردن با گوشی خیلی سخت شده، با توجه به عکس زیر آپلود کنید)

![آپلود فایل Worker](https://telegra.ph/file/fd039bb86857e63263884.png)
حالا اگر با UUID و Proxy IP پیشفرض مشکلی ندارید که ادامه بدید، در غیر اینصورت به بخش [تنظیمات پیشرفته]() برید و برگردید اینجا.

 در نهایت ورکر رو Save and Deploy کنید.

حالا به داشبورد ورکر برگردید و این مراحل را دنبال کنید:

![image](assets/images/navigate_worker.png)

بعد از این قسمت وارد صفحه KV بشید:

![صفحه KV](assets/images/KV-Menu.png)

دتو قسمت KV بزنید Create a namespace و یه اسم دلخواه وارد کنید مثلا Test و Add کنید.

دوباره از منوی سمت چپ به قسمت Workers & Pages برید، ورکری که ساختید رو باز کنید، برید به قسمت Settings و Variables رو انتخاب کنید. یه کم بیاید پایین قسمت KV Namespace Bindings رو میبینید، روی Add binding بزنید و مطابق تصویر زیر از کشویی سمت راست اون KV که ساخته بودید انتخاب کنید (در مثال Test بود). چیزی که مهمه کشویی سمت چپه، حتما باید مقدارش رو بذارید bpb و Save and Deploy و تمام.


![تنظیمات KV](assets/images/KV-link.png)

برای مثال، فرض کنید دامنه‌ی ورکر شما هست worker-polished-leaf-d022.workers.dev، یه panel/ تهش اضافه کنید و وارد پنل بشید. مثال:

https://worker-polished-leaf-d022.workers.dev/panel

اول میره به صفحه‌ی لاگین، پسورد پیشفرض یعنی admin رو وارد کنید و تمام.



آموزشها و نکات هم که تو آموزش اصلی هست:

[Tutorial Link](configuration_fa.md)

نصب به پایان رسیده و توضیحاتی که در ادامه اومده شاید برای عموم لازم نباشه.

####  تنظیمات پیشرفته (اختیاری)
شاید تا الان متوجه شده باشید که در مورد تغییر UUID و Proxy IP چیزی نگفتیم چون میتونید از پیشفرض خود پنل استفاده کنید. اما برای تغییرشون میتونید مراحل زیر رو دنبال کنید، توصیه میشه حداقل UUID رو تغییر بدید. 

**تغییر UUID**
همونطور که میدونید UUID  مثل اسم رمزی میمونه که داخل لینک‌های اشتراک و کانفیگ ها قرار میگیره و شما در صورت نیاز میتونید تغییر بدید. در صورت تغییر این پارامتر اتصال کاربرهای شما قطع میشه  و لازم هست لینک اشتراک و یا کانفیگ ها رو مجددا در اختیارشون قرار بدید. در صورتی که این UUID رو در این مرحله تعریف نکنید هم کد از یک UUID پیشفرض استفاده خواهد کرد.

تو خط 9 یه uuid هست و میتونید تغییرش ندید ولی ترجیحا اینجوری عوضش کنید: تو خط 9 یه آدرس وبسایت گذاشتم این پایین هم لینکش رو گذاشتیم، بازش کنید یه UUID بگیرید و کپی کنید تو خط 10 جای قبلی و تمام. ورکر رو Save and Deploy کنید.

[UUID Generator](https://www.uuidgenerator.net/)

![UUID Generator](assets/images/uuid-generator.png)


**ثابت کردن Proxy IP**

ما یه مشکلی داریم که این کد به صورت پیشفرض از تعداد زیادی IP Proxy استفاده میکنه که برای هر بار اتصال به سایتای پشت کلادفلر ( شامل بخش وسیعی از وب میشه) به صورت رندوم IP جدیدی انتخاب میکنه و در نتیجه به صورت متناوب IP شما رو به صورت مجازی تغییر پیدا میکنه. این تغییر IP شاید برای برخی مشکل ساز باشه. (مخصوصا تریدرها)
این دو تا لینک رو باز کنید یه تعدادی IP نشون میده که میتونید کشورشون رو هم چک کنید و یه دونه انتخاب کنید.

[Proxy IP](https://www.nslookup.io/domains/cdn.xn--b6gac.eu.org/dns-records/)

[Proxy IP](https://www.nslookup.io/domains/cdn-all.xn--b6gac.eu.org/dns-records/)

![Image](assets/images/IP_Proxy.png)


متن اول خط 14 به این صورت است:

```javascript
const proxyIPs = ['cdn.xn--b6gac.eu.org', 'cdn-all.xn--b6gac.eu.org', 'edgetunnel.anycast.eu.org'];
```

بعد که خواستید IP رو بذارید این شکلی میشه:
```javascript
const proxyIPs = ['8.218.149.193'];
```

**نکته 1:** فقط حواستون باشه تعداد این IP ها زیاده و ممکنه تعداد زیادیشون از کار افتاده باشن. باید تست کنید تا یه خوبشو سوا کنید.

**نکته 2:** اگر از تک IP استفاده کنید احتمالا بعد یه مدت دوباره از کار میافته و خیلی سایتا باز نمیشن. باید از اول این مراحلو برید.


 ورکر رو Save and Deploy کنید.

 
